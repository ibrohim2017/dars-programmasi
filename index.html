<!DOCTYPE html>
<html lang="uz">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ta‚Äôlim Sayti SPA</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 flex flex-col md:flex-row min-h-screen">

    <!-- MOBIL HEADER -->
    <header class="bg-gray-800 text-white flex items-center justify-between p-4 md:hidden">
        <h1 class="text-xl font-bold">üìö Ta‚Äôlim</h1>
        <button id="menuBtn" class="text-2xl focus:outline-none">‚ò∞</button>
    </header>
    <!-- ISM & PAROL OYNASI -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded shadow w-80">
            <h2 class="text-xl font-bold mb-4">Talim saytiga kirish</h2>
            <input type="text" id="username" placeholder="Ismingiz" class="border p-2 rounded w-full mb-3">
            <input type="password" id="password" placeholder="Parol" class="border p-2 rounded w-full mb-4">
            <button id="loginBtn"
                class="bg-blue-700 text-white px-4 py-2 rounded w-full hover:bg-blue-800">Kirish</button>
        </div>
    </div>

    <script>
        const loginModal = document.getElementById('loginModal');
        const loginBtn = document.getElementById('loginBtn');
        loginBtn.addEventListener('click', () => {
            const user = document.getElementById('username').value;
            const pass = document.getElementById('password').value;

            if (pass === 'i1') {
                alert("‚úÖ Admin panelga kirildi!");
                loginModal.style.display = 'none';
                showSection('admin'); // admin panelini ko‚Äòrsatish
            } else if (pass === 'a2') {
                alert("üß© Faol formasi yopildi!");
                loginModal.style.display = 'none';
                showSection('faollar');
                const faolForm = document.getElementById('faolForm');
                if (faolForm) faolForm.classList.add('hidden'); // formani yo‚Äòq qilish
            } else {
                alert("‚ùå Parol xato!");
            }
        });
    </script>


    <!-- CHAP NAV -->
    <nav id="sideMenu"
        class="w-64 bg-gray-800 text-white flex flex-col p-6 absolute md:relative md:translate-x-0 -translate-x-full transition-transform duration-300 z-20 h-full md:h-auto">
        <h1 class="text-2xl font-bold mb-10 text-center hidden md:block">üìö Ta‚Äôlim</h1>
        <ul class="space-y-4">
            <li><button onclick="showSection('uy')"
                    class="w-full text-left block px-3 py-2 rounded hover:bg-gray-700">üè† Uy</button></li>
            <li><button onclick="showSection('faollar')"
                    class="w-full text-left block px-3 py-2 rounded hover:bg-gray-700">‚≠ê Faollar</button></li>
            <li><button onclick="showSection('kitoblar')"
                    class="w-full text-left block px-3 py-2 rounded hover:bg-gray-700">üìö Kitoblar</button></li>
            <li><button onclick="showSection('ai')"
                    class="w-full text-left block px-3 py-2 rounded hover:bg-gray-700">ü§ñ AI</button></li>
            <li><button onclick="showSection('testlar')"
                    class="w-full text-left block px-3 py-2 rounded hover:bg-gray-700">üìù Testlar</button></li>
            <li><button onclick="showSection('admin')"
                    class="w-full text-left block px-3 py-2 rounded hover:bg-gray-700">üîê Admin</button></li>
        </ul>
    </nav>

    <!-- ASOSIY KONTENT -->
    <main class="flex-1 p-6 md:p-10 overflow-y-auto mt-16 md:mt-0">

        <!-- UY -->
        <section id="uy" class="section">
            <h2 class="text-3xl font-bold mb-4">Uy sahifasi</h2>
            <p class="text-gray-700 text-lg">Ta‚Äôlim platformangizga xush kelibsiz! Chap menyudan bo‚Äòlim tanlang.</p>
        </section>

        <!-- FAOLLAR -->
        <section id="faollar" class="section hidden">
            <h2 class="text-3xl font-bold mb-4">‚≠ê Faollar</h2>
            <form id="faolForm" class="mb-6 bg-white p-4 rounded shadow">
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-3">
                    <input type="text" id="darsNomi" placeholder="Dars nomi" class="border p-2 rounded">
                    <input type="text" id="ball" placeholder="Ball (0‚Äì100)" class="border p-2 rounded">
                    <select id="holat" class="border p-2 rounded">
                        <option>Faol</option>
                        <option>Yaxshi</option>
                        <option>Qoniqarli</option>
                    </select>
                </div>
                <div class="flex flex-wrap gap-3">
                    <button type="submit"
                        class="bg-blue-700 text-white px-4 py-2 rounded hover:bg-blue-800">Qo‚Äòshish</button>
                    <button type="button" onclick="clearFaollar()"
                        class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">Tozalash</button>
                </div>
            </form>
            <div id="faolList" class="space-y-3"></div>
        </section>

        <!-- KITOBLAR -->
        <section id="kitoblar" class="section hidden">
            <h2 class="text-3xl font-bold mb-6">üìö Kitoblar</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

                <div onclick="window.open('pdflar/arab_tili.pdf','_blank')"
                    class="cursor-pointer bg-white rounded-2xl shadow hover:shadow-lg transition transform hover:-translate-y-1">
                    <img src="rasmlar/arab_tili.jpg" class="rounded-t-2xl h-56 sm:h-60 w-full object-cover">
                    <div class="p-4">
                        <h3 class="font-bold text-lg">Arab Tili Asoslari</h3>
                        <p class="text-gray-600">Ustoz Ibrohim</p>
                    </div>
                </div>

                <div onclick="window.open('pdflar/html_css.pdf','_blank')"
                    class="cursor-pointer bg-white rounded-2xl shadow hover:shadow-lg transition transform hover:-translate-y-1">
                    <img src="rasmlar/html_css.jpg" class="rounded-t-2xl h-56 sm:h-60 w-full object-cover">
                    <div class="p-4">
                        <h3 class="font-bold text-lg">HTML & CSS Darslari</h3>
                        <p class="text-gray-600">Ibrohim Abdulhamid</p>
                    </div>
                </div>

            </div>
        </section>

        <!-- AI -->
        <section id="ai" class="section hidden">
            <h2 class="text-3xl font-bold mb-4">ü§ñ Sun‚Äôiy Intellekt</h2>
            <div class="bg-white p-4 rounded shadow h-96 flex flex-col">
                <div id="chatBox" class="flex-1 overflow-y-auto mb-3 border p-2 rounded bg-gray-50"></div>
                <div class="flex gap-2">
                    <input type="text" id="aiInput" placeholder="Savol yozing..." class="flex-1 border p-2 rounded">
                    <button onclick="sendMessage()"
                        class="bg-blue-700 text-white px-4 py-2 rounded hover:bg-blue-800">Yuborish</button>
                </div>
            </div>
        </section>

        <!-- TESTLAR -->
        <section id="testlar" class="section hidden">
            <h2 class="text-3xl font-bold mb-4">üìù Testlar</h2>
            <div class="bg-white p-4 rounded shadow">
                <p class="mb-4">HTML bo‚Äòyicha test:</p>
                <div id="testBox"></div>
                <button id="submitTest" class="mt-3 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-800">Testni
                    yakunlash</button>
            </div>
        </section>

        <!-- ADMIN -->
        <section id="admin" class="section hidden">
            <h2 class="text-3xl font-bold mb-4">üîê Admin Panel</h2>
            <div id="adminLogin" class="bg-white p-4 rounded shadow max-w-sm">
                <input type="password" id="adminPass" placeholder="Parol kiriting"
                    class="border p-2 rounded w-full mb-3">
                <button onclick="loginAdmin()"
                    class="bg-blue-700 text-white px-4 py-2 rounded hover:bg-blue-800">Kirish</button>
            </div>
            <div id="adminPanel" class="hidden">
                <p class="mb-3 text-green-700 font-bold">Siz admin paneldasiz!</p>
                <button onclick="clearFaollar()"
                    class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">Faollarni tozalash</button>
            </div>
        </section>

    </main>

    <script>
        // Menyuni mobil qurilmalarda ochish / yopish
        const menuBtn = document.getElementById('menuBtn');
        const sideMenu = document.getElementById('sideMenu');
        menuBtn.addEventListener('click', () => {
            sideMenu.classList.toggle('-translate-x-full');
        });

        function showSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            if (window.innerWidth < 768) sideMenu.classList.add('-translate-x-full');
        }

        // FAOLLAR
        const faolForm = document.getElementById('faolForm');
        const faolList = document.getElementById('faolList');
        window.addEventListener('load', () => {
            const saved = JSON.parse(localStorage.getItem('faollar')) || [];
            saved.forEach(item => addFaolCard(item.dars, item.ball, item.holat));
            renderTest();
        });

        faolForm.addEventListener('submit', e => {
            e.preventDefault();
            const dars = document.getElementById('darsNomi').value;
            const ball = document.getElementById('ball').value;
            const holat = document.getElementById('holat').value;
            if (dars && ball) {
                addFaolCard(dars, ball, holat);
                saveFaollar();
                faolForm.reset();
            }
        });

        function addFaolCard(dars, ball, holat) {
            const card = document.createElement('div');
            card.className = 'bg-white p-3 rounded shadow flex justify-between items-center';
            card.innerHTML = `<div contenteditable="true">
        <p class="font-bold">${dars}</p>
        <p class="text-gray-600">${holat} ‚Äî ${ball} ball</p></div>
        <button onclick="removeCard(this)" class="text-red-500 hover:text-red-700">üóëÔ∏è</button>`;
            faolList.appendChild(card);
        }

        function removeCard(btn) {
            btn.parentElement.remove();
            saveFaollar();
        }

        function saveFaollar() {
            const data = [];
            faolList.querySelectorAll('div.bg-white').forEach(card => {
                const texts = card.querySelectorAll('p');
                data.push({
                    dars: texts[0].innerText,
                    holat: texts[1].innerText.split(' ‚Äî ')[0],
                    ball: texts[1].innerText.split(' ‚Äî ')[1]?.replace(' ball', '') || ''
                });
            });
            localStorage.setItem('faollar', JSON.stringify(data));
        }

        function clearFaollar() {
            faolList.innerHTML = '';
            localStorage.removeItem('faollar');
        }

        // AI
        function sendMessage() {
            const input = document.getElementById('aiInput');
            const chat = document.getElementById('chatBox');
            if (input.value.trim() === '') return;
            const userMsg = document.createElement('div');
            userMsg.className = 'text-right mb-2';
            userMsg.innerHTML = `<span class="bg-blue-700 text-white px-3 py-1 rounded inline-block">${input.value}</span>`;
            chat.appendChild(userMsg);
            const botMsg = document.createElement('div');
            botMsg.className = 'text-left mb-2';
            botMsg.innerHTML = `<span class="bg-gray-300 text-black px-3 py-1 rounded inline-block">Savolingiz qabul qilindi: "${input.value}"</span>`;
            chat.appendChild(botMsg);
            chat.scrollTop = chat.scrollHeight;
            input.value = '';
        }

        // TEST
        const testBox = document.getElementById('testBox');
        const testData = [
            { q: "HTML nima?", opts: ["Til", "O‚Äòyin", "Rasm"], ans: 0 },
            { q: "CSS nima uchun ishlatiladi?", opts: ["Dizayn", "Kod", "Matn"], ans: 0 },
            { q: "JavaScript qayerda ishlaydi?", opts: ["Frontend", "Backend", "Ikkalasi"], ans: 2 }
        ];
        function renderTest() {
            testData.forEach((t, i) => {
                const div = document.createElement('div');
                div.className = 'mb-3';
                div.innerHTML = `<p class="font-bold">${i + 1}. ${t.q}</p>`;
                t.opts.forEach((o, j) => {
                    div.innerHTML += `<label class="block"><input type="radio" name="q${i}" value="${j}" class="mr-2">${o}</label>`;
                });
                testBox.appendChild(div);
            });
        }

        document.getElementById('submitTest').addEventListener('click', () => {
            let score = 0;
            testData.forEach((t, i) => {
                const val = document.querySelector(`input[name="q${i}"]:checked`);
                if (val && parseInt(val.value) === t.ans) score++;
            });
            alert(`Siz ${score} ball to‚Äòpladingiz!`);
            addFaolCard('Test', score, 'Yaxshi');
            saveFaollar();
        });

        // ADMIN
        function loginAdmin() {
            const pass = document.getElementById('adminPass').value;
            if (pass === '1234') {
                document.getElementById('adminLogin').classList.add('hidden');
                document.getElementById('adminPanel').classList.remove('hidden');
                alert("Admin panelga kirildi!");
            } else {
                alert("Parol xato!");
            }
        }
    </script>
    <script>
        // Klaviaturadan yozilgan matnni eshitamiz
        let secretInput = "";

        document.addEventListener("keydown", (e) => {
            secretInput += e.key;  // yozilgan harfni qo‚Äòshamiz
            secretInput = secretInput.slice(-3); // faqat oxirgi 3 ta belgini saqlaymiz

            const faolForm = document.getElementById('faolForm');

            // Agar foydalanuvchi "ab2" yozsa
            if (secretInput === "ab2") {
                if (faolForm) faolForm.classList.add("hidden");
                alert("üß© Faol formasi yopildi! (Responsive rejim)");
            }

            // Agar foydalanuvchi "ib0" yozsa
            if (secretInput === "ib0") {
                if (faolForm) faolForm.classList.remove("hidden");
                alert("‚úÖ Faol formasi yana ko‚Äòrsatildi!");
            }
        });
    </script>

</body>

</html>